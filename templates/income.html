<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Income</title>
  <link rel="stylesheet" href="/static/css_files/income.css">
</head>
<body>
  <div class="container">
    <div class="card" id="dashboard-card">
      <h2 id="welcome"></h2>
      <p id="role"></p>
      <button id="add-Maintenance-btn" class="dashboard-btn">Create Maintenance Record</button>
  {% if user.role in ["secretary", "treasurer", "member"] %}
  <button id="view-Maintenance-btn" class="dashboard-btn">View Maintenance</button>
  {% endif %}
      <button onclick="window.location.href='/dashboard'">Back to Dashboard</button>
    </div>

    <!-- Maintenance Form (hidden by default) -->
    <div class="card hidden" id="Maintenance-form-card">
      <h3>Add Maintenance</h3>
      <form id="maintenance-form" class="vertical-form">
        <input type="text" id="owner_name" placeholder="Owner Name" required>
        <input type="month" id="main_month" required>
        <input type="date" id="main_date" required>
        <input type="number" id="main_amount" placeholder="Amount" step="0.01" required>
        <input type="number" id="paid_by" placeholder="Flat Number" required>
        <button type="submit">Add Maintenance</button>
      </form>
      <div id="maintenance-message"></div>
      <button id="back-from-form-btn" style="margin-top:16px;">Back</button>
    </div>

    <!-- Maintenance Table (hidden by default) -->
  {% if user.role in ["secretary", "treasurer", "member"] %}
  <div class="card hidden" id="Maintenance-table-card">
      <h3>Monthly Maintenance</h3>
      
      <!-- Filter Controls -->
      <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
        <h4>Filter Records</h4>
        <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
          <div>
            <label for="filter-year">Year:</label>
            <select id="filter-year" style="padding: 5px; margin-left: 5px;">
              <option value="">All Years</option>
              <option value="2023">2023</option>
              <option value="2024">2024</option>
              <option value="2025">2025</option>
              <option value="2025">2025</option>
              <option value="2026">2026</option>
              <option value="2027">2027</option>
            </select>
          </div>
          <div>
            <label for="filter-month">Month:</label>
            <select id="filter-month" style="padding: 5px; margin-left: 5px;">
              <option value="">All Months</option>
              <option value="January">January</option>
              <option value="February">February</option>
              <option value="March">March</option>
              <option value="April">April</option>
              <option value="May">May</option>
              <option value="June">June</option>
              <option value="July">July</option>
              <option value="August">August</option>
              <option value="September">September</option>
              <option value="October">October</option>
              <option value="November">November</option>
              <option value="December">December</option>
            </select>
          </div>
          <button id="apply-filters" style="padding: 6px 12px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Apply Filter
          </button>
          <button id="clear-filters" style="padding: 6px 12px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">
            Clear
          </button>
        </div>
      </div>
      
      <table id="Maintenance-table">
        <thead>
          <tr>
            <th>Owner Name</th>
            <th>Date</th>
            <th>Month</th>
            <th>Year</th>
            <th>Amount</th>
            <th>Paid By</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="maintenance-body">
          <!-- Maintenance will be loaded here -->
        </tbody>
      </table>
      <button id="back-from-table-btn">Back</button>
    </div>
  {% endif %}
  </div>
  <button id="logoutBtn">Logout</button>
  <script src="/static/JSScripts/income.js"></script>
</body>
</html>

