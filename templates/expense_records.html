<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Records - Apartment Management</title>
    <link rel="stylesheet" href="/static/css_files/expense_records.css">
</head>
<body>
    <div class="container">
        <a href="/dashboard" class="back-btn">â† Back to Dashboard</a>
        
        <div class="header">
            <h1>ğŸ“Š Expense Records Dashboard</h1>
            <p>Welcome, <strong>{{ user.name }}</strong> ({{ user.role.title() }})</p>
        </div>

        <!-- Filters -->
        <div class="filters">
            <label><strong>Select Year:</strong></label>
            <select id="yearSelect">
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025" selected>2025</option>
                <option value="2026">2026</option>
            </select>
            <button onclick="loadYearSummaryExpense()">ğŸ“ˆ Load Year Summary</button>
        </div>

        <!-- Summary Cards -->
        <div class="summary-cards">
            <div class="card">
                <h3>ğŸ’° Total Year Expense</h3>
                <div class="amount" id="yearlyTotalExpense">â‚¹0</div>
                <small id="yearlyCountExpense">0 records</small>
            </div>
            <div class="card">
                <h3>ğŸ“… Selected Month Expense</h3>
                <div class="amount" id="monthlyTotalExpense">â‚¹0</div>
                <small id="monthlyCountExpense">Click a month to view</small>
            </div>
        </div>

        <!-- Monthly Grid -->
        <h2 class="section-title">Monthly Breakdown</h2>
        <div class="monthly-grid" id="monthlyGridExpense">
            <!-- Months will be populated by JavaScript -->
        </div>

        <!-- Records Table -->
        <div id="expenseRecordsSection" style="display: none;">
            <h2 class="section-title" id="expenseRecordsTitle">Records for Selected Month</h2>
            <table class="records-table">
                <thead>
                    <tr>
                        <th>ğŸ“… Date</th>
                        <th>ğŸ‘¤ Expense Name</th>
                        <th>ğŸ  Description</th>
                        <th>ğŸ’µ Amount</th>
                        <th>ğŸ“ Created By</th>
                    </tr>
                </thead>
                <tbody id="expenseRecordsTableBody">
                    <!-- Records will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
    <script>
        // Pass user data from template to JavaScript
        const userData = {
            username: "{{ user.username }}",
            name: "{{ user.name }}",
            role: "{{ user.role }}"
        };
    </script>
    <script src="/static/JSScripts/expense_records.js"></script>
</body>
</html>
